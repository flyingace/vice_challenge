function requestData(a){fetch(a).then(b=>{const c=b.headers.get("content-type");if(c&&c.includes("application/json"))return b.json();throw new TypeError("Oops, we haven't got JSON!")}).then(b=>{handleJSONResponse(b)}).catch(b=>{console.log(b)})}function handleJSONResponse(a){loadShows(a),loadThumbnails(a),addEventListeners(),updateUIConditionally(a.length)}function loadShows(a){let b="";const c=document.querySelector(".all-shows-container");a.forEach(function(d){b+=`<article class="show-container" id="showId${d.id}">
                <img src=".${d.product_image_url}" class="main-image" alt="Image for ${d.title}">
                <p class="episode-count">${d.episodes} Episodes</p>
                <h1 class="show-title">${d.title}</h1>
            </article>`}),c.innerHTML=b}function loadThumbnails(a){let b="";const c=document.querySelector(".thumbs");a.forEach(function(d){b+=`<img src=".${d.product_image_url}" class="show-thumb" id="thumbId${d.id}" alt="Thumnail image for ${d.title}">`}),c.innerHTML=b}function addEventListeners(){window.addEventListener("popstate",function(){updateUI(extractIdFromParams())}),document.querySelector(".thumbs").addEventListener("click",function(a){onThumbClick(a)})}function updateUIConditionally(a){const b=setInterval(function(){const c=document.querySelectorAll(".show-thumb");c.length===a&&(updateUI(extractIdFromParams()),clearInterval(b))},100)}function extractIdFromParams(){const a=new URLSearchParams(window.location.search);return a.get("id")}function deselectPreviousShow(){const a=document.querySelector(".show-container.current");a&&a.classList.remove("current")}function displaySelectedShow(a){document.querySelector(`#showId${a}`).classList.add("current")}function fadePreviousThumb(){const a=document.querySelector(".show-thumb.current");a&&a.classList.remove("current")}function highlightSelectedThumb(a){document.querySelector(`#thumbId${a}`).classList.add("current")}function moveSelectedThumbIntoView(a){const b=document.querySelector(`#thumbId${a}`),c=document.querySelector(".thumbs"),d=b.offsetLeft-c.offsetLeft;isThumbInView(b,c,d)||(c.scrollLeft=d)}function isThumbInView(a,b,c){return b.scrollLeft<=c&&c+a.width-b.scrollLeft<=b.offsetWidth}function onThumbClick(a){const b=a.target.id.replace("thumbId","");updateHistory(b),updateUI(b)}function updateHistory(a){const b=`?id=${a}`;history.pushState("index.html","",b)}function updateUI(a){const b=a?a:1;deselectPreviousShow(),displaySelectedShow(b),fadePreviousThumb(),highlightSelectedThumb(b),moveSelectedThumbIntoView(b)}requestData("./shows.json");